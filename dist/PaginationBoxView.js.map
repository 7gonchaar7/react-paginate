{"version":3,"sources":["../react_components/PaginationBoxView.js"],"names":["PaginationBoxView","props","callCallback","selectedItem","onPageChange","selected","pagination","items","pageCount","pageRangeDisplayed","index","state","activeClassName","leftSide","rightSide","page","breakView","pageView","marginPagesDisplayed","keys","Object","breakLabelKey","length","breakLabelValue","breakLabel","breakClassName","initialPage","forcePage","nextProps","setState","containerClassName","previousClassName","nextClassName","pathname","disabledClassName","previousClasses","nextClasses","relPrev","relNext","rel","prevLinkQuery","nextLinkQuery","prevLinkProps","assign","to","query","nextLinkProps","propTypes","number","isRequired","previousLabel","node","nextLabel","func","string","pageClassName","pageLinkClassName","previousLinkClassName","nextLinkClassName","defaultProps"],"mappings":"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","file":"PaginationBoxView.js","sourcesContent":["'use strict';\n\nimport React, { Component, PropTypes } from 'react';\nimport classNames from 'classnames';\n\nimport createFragment from 'react-addons-create-fragment';\nimport Link from 'react-router/lib/Link';\nimport PageView from './PageView';\nimport BreakView from './BreakView';\n\n\nexport default class PaginationBoxView extends Component {\n  static propTypes = {\n    pageCount             : PropTypes.number.isRequired,\n    pageRangeDisplayed    : PropTypes.number.isRequired,\n    marginPagesDisplayed  : PropTypes.number.isRequired,\n    previousLabel         : PropTypes.node,\n    nextLabel             : PropTypes.node,\n    breakLabel            : PropTypes.node,\n    onPageChange          : PropTypes.func,\n    initialPage           : PropTypes.number,\n    forcePage             : PropTypes.number,\n    pathname              : PropTypes.string,\n    containerClassName    : PropTypes.string,\n    pageClassName         : PropTypes.string,\n    pageLinkClassName     : PropTypes.string,\n    activeClassName       : PropTypes.string,\n    previousClassName     : PropTypes.string,\n    nextClassName         : PropTypes.string,\n    previousLinkClassName : PropTypes.string,\n    nextLinkClassName     : PropTypes.string,\n    disabledClassName     : PropTypes.string,\n    breakClassName        : PropTypes.string\n  };\n\n  static defaultProps = {\n    pageCount            : 10,\n    pageRangeDisplayed   : 2,\n    marginPagesDisplayed : 3,\n    activeClassName      : \"selected\",\n    previousClassName    : \"previous\",\n    nextClassName        : \"next\",\n    previousLabel        : \"Previous\",\n    nextLabel            : \"Next\",\n    breakLabel           : \"...\",\n    disabledClassName    : \"disabled\"\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: props.initialPage ? props.initialPage :\n                props.forcePage   ? props.forcePage :\n                0\n    };\n  }\n\n  componentDidMount() {\n    // Call the callback with the initialPage item:\n    if (typeof(this.props.initialPage) !== 'undefined') {\n      this.callCallback(this.props.initialPage);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (typeof(nextProps.forcePage) !== 'undefined' && this.props.forcePage !== nextProps.forcePage) {\n      this.setState({selected: nextProps.forcePage});\n    }\n  }\n\n  callCallback = (selectedItem) => {\n    if (typeof(this.props.onPageChange) !== \"undefined\" &&\n        typeof(this.props.onPageChange) === \"function\") {\n      this.props.onPageChange({selected: selectedItem});\n    }\n  };\n\n  pagination = () => {\n    let items = {};\n\n    if (this.props.pageCount <= this.props.pageRangeDisplayed) {\n\n      for (let index = 0; index < this.props.pageCount; index++) {\n        items['key' + index] = <PageView\n          selected={this.state.selected === index}\n          activeClassName={this.props.activeClassName}\n          page={index + 1} />\n      }\n\n    } else {\n\n      let leftSide  = (this.props.pageRangeDisplayed / 2);\n      let rightSide = (this.props.pageRangeDisplayed - leftSide);\n\n      if (this.state.selected > this.props.pageCount - this.props.pageRangeDisplayed / 2) {\n        rightSide = this.props.pageCount - this.state.selected;\n        leftSide  = this.props.pageRangeDisplayed - rightSide;\n      }\n      else if (this.state.selected < this.props.pageRangeDisplayed / 2) {\n        leftSide  = this.state.selected;\n        rightSide = this.props.pageRangeDisplayed - leftSide;\n      }\n\n      let index;\n      let page;\n      let breakView;\n\n      for (index = 0; index < this.props.pageCount; index++) {\n\n        page = index + 1;\n\n        let pageView = (\n          <PageView\n            selected={this.state.selected === index}\n            activeClassName={this.props.activeClassName}\n            page={index + 1} />\n        );\n\n        if (page <= this.props.marginPagesDisplayed) {\n          items['key' + index] = pageView;\n          continue;\n        }\n\n        if (page > this.props.pageCount - this.props.marginPagesDisplayed) {\n          items['key' + index] = pageView;\n          continue;\n        }\n\n        if ((index >= this.state.selected - leftSide) && (index <= this.state.selected + rightSide)) {\n          items['key' + index] = pageView;\n          continue;\n        }\n\n        let keys            = Object.keys(items);\n        let breakLabelKey   = keys[keys.length - 1];\n        let breakLabelValue = items[breakLabelKey];\n\n        if (this.props.breakLabel && breakLabelValue !== breakView) {\n          breakView = (\n            <BreakView\n              breakLabel={this.props.breakLabel}\n              breakClassName={this.props.breakClassName}\n            />\n          );\n\n          items['key' + index] = breakView;\n        }\n      }\n    }\n\n    return items;\n  };\n\n  render() {\n    const { containerClassName, previousClassName, nextClassName,\n      pathname, pageCount, disabledClassName, forcePage } = this.props\n    const previousClasses = classNames(previousClassName,\n      {[disabledClassName]: this.state.selected === 0});\n\n    const nextClasses = classNames(nextClassName,\n      {[disabledClassName]: this.state.selected === pageCount - 1});\n    let relPrev = {};\n    let relNext = {};\n    if (forcePage > 0) relPrev = { rel: 'prev' };\n    if (forcePage < pageCount - 1) relNext = { rel: 'next' };\n    const prevLinkQuery = forcePage !== 1 ? { page: forcePage } : {};\n    const nextLinkQuery = { page: forcePage + 2 }\n    const prevLinkProps = Object.assign({ to: { pathname, query: prevLinkQuery } }, relPrev);\n    const nextLinkProps = Object.assign({ to: { pathname, query: nextLinkQuery } }, relNext);\n    \n    return (\n      <ul className={containerClassName}>\n        <li className={previousClasses}>\n          <Link {...prevLinkProps}>\n            <i className=\"fa fa-chevron-left\"/>\n          </Link>\n        </li>\n        {createFragment(this.pagination())}\n        <li className={nextClasses}>\n          <Link {...nextLinkProps}>\n            <i className=\"fa fa-chevron-right\"/>\n          </Link>\n        </li>\n      </ul>\n    );\n  }\n};\n"]}